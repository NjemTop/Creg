{% extends 'base.html' %}
{% load static %}

{% include "includes/messages.html" %}

{% block title %} –ö–ª–∏–µ–Ω—Ç: {{ client.client_name }} {% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'clients/css/client_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container py-4">
    <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ</h2>
    
    <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ client.client_name }}</p>
    <p><strong>–°–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ client.short_name|default:"-" }}</p>
    <p><strong>–£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å:</strong> {{ client.account_name }}</p>
    <p><strong>–Ø–∑—ã–∫:</strong> {{ client.language.name|default:"-" }}</p>
    <p><strong>SaaS:</strong> {% if client.saas %}‚úÖ{% else %}‚ùå{% endif %}</p>
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {% if client.contact_status %} ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π {% else %} ‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π {% endif %}</p>
    <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> {{ client.notes|default:"-" }}</p>
    <p><strong>–°–æ–∑–¥–∞–Ω:</strong> {{ client.created_at|date:'d.m.Y H:i' }}</p>
    <p><strong>–û–±–Ω–æ–≤–ª—ë–Ω:</strong> {{ client.updated_at|date:'d.m.Y H:i' }}</p>

    <h3 class="mt-4">–°–µ—Ä–≤–∏—Å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    {% if service_info %}
        <p><strong>–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω:</strong> {{ service_info.service_pack|default:"-" }}</p>
        <p><strong>–ú–µ–Ω–µ–¥–∂–µ—Ä:</strong> {{ service_info.manager.first_name }} {{ service_info.manager.last_name }}</p>
        <p><strong>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å:</strong> {{ service_info.loyalty|default:"-" }}</p>
    {% else %}
        <p>‚ùå –°–µ—Ä–≤–∏—Å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
    {% endif %}

    <h3 class="mt-4">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    {% if technical_info %}
        <p><strong>–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞:</strong> {{ technical_info.server_version }}</p>
        <p><strong>–ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è:</strong> {{ technical_info.previous_version|default:"-" }}</p>
        <p><strong>–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</strong> {{ technical_info.update_date|date:"d.m.Y" }}</p>
        <p><strong>–î–∞—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</strong> {{ technical_info.previous_update_date|date:"d.m.Y"|default:"-" }}</p>
        <p><strong>API:</strong> {% if technical_info.api_enabled %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>MDM –ø–æ–¥–¥–µ—Ä–∂–∫–∞:</strong> {% if technical_info.mdm_support %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ iPad:</strong> {% if technical_info.supports_ipad %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Android:</strong> {% if technical_info.supports_android %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è Web:</strong> {% if technical_info.localized_web %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è iOS:</strong> {% if technical_info.localized_ios %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–°–∫–∏–Ω—ã Web:</strong> {% if technical_info.skins_web %}‚úÖ{% else %}‚ùå{% endif %}</p>
        <p><strong>–°–∫–∏–Ω—ã iOS:</strong> {% if technical_info.skins_ios %}‚úÖ{% else %}‚ùå{% endif %}</p>
    {% else %}
        <p>‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
    {% endif %}
    
    <h3 class="mt-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
    {% if client.contacts.all %}
        <ul>
            {% for contact in client.contacts.all %}
                <li><strong>{{ contact.full_name }}</strong> ‚Äì {{ contact.position }} <br>
                    üìß {{ contact.email }} | üìû {{ contact.phone_number|default:"-" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ú–æ–¥—É–ª–∏</h3>
    {% if client.modules.all %}
        <ul>
            {% for module in client.modules.all %}
                <li>{{ module.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ú–æ–¥—É–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
    {% if client.integrations.all %}
        <ul>
            {% for integration in client.integrations.all %}
                <li>{{ integration.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–°–µ—Ä–≤–µ—Ä—ã</h3>
    {% if client.servers.all %}
        <ul>
            {% for server in client.servers.all %}
                <li><strong>{{ server.name }}</strong> ({{ server.ip_address }}) ‚Äì {{ server.operating_system }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –°–µ—Ä–≤–µ—Ä—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤</h3>
    {% if server_accesses %}
        <ul>
            {% for acc in server_accesses %}
                <li><strong>{{ acc.username }}</strong> ‚Äì {{ acc.description|default:"-" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏</h3>
    {% if tech_accounts %}
        <ul>
            {% for acc in tech_accounts %}
                <li><strong>{{ acc.username }}</strong> ‚Äì {{ acc.description|default:"-" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
    {% endif %}

    <h3 class="mt-4">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏</h3>
    {% if remote_access %}
        <ul>
            {% for access in remote_access %}
                <li>{{ access.connection_details }}{% if access.file_path %} (<a href="{{ access.file_path.url }}">—Ñ–∞–π–ª</a>){% endif %}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
    {% endif %}

    <h3 class="mt-4">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏</h3>
    {% if tech_notes %}
        <ul>
            {% for note in tech_notes %}
                <li>{{ note.note }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</h3>
    {% if client.server_version_history.all %}
        <ul>
            {% for history in client.server_version_history.all %}
                <li>{{ history.version }} ‚Äì {{ history.update_date|date:"d.m.Y" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
    {% endif %}

    <a href="{% url 'clients:client_list' %}" class="styled-btn mt-3">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É</a>
</div>

<script src="{% static 'clients/js/client_detail.js' %}"></script>

{% endblock %}
