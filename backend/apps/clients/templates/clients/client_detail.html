{% extends 'base.html' %}
{% load static %}

{% include "includes/messages.html" %}

{% block title %} –ö–ª–∏–µ–Ω—Ç: {{ client.client_name }} {% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'clients/css/client_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container py-4">
    <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ</h2>
    
    <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ client.client_name }}</p>
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {% if client.contact_status %} ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π {% else %} ‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π {% endif %}</p>
    <p><strong>–°–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ client.short_name }}</p>
    <p><strong>–£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å:</strong> {{ client.account_name }}</p>

    <h3 class="mt-4">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä</h3>
    <p><strong>–ú–µ–Ω–µ–¥–∂–µ—Ä:</strong> {{ manager.first_name }} {{ manager.last_name }}</p>

    <h3 class="mt-4">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    <p><strong>–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞:</strong> {{ client.technical_info.server_version|default:"‚ùå –ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>
    <p><strong>–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</strong> {{ client.technical_info.update_date|date:"d.m.Y" }}</p>
    
    <h3 class="mt-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
    {% if client.contacts.all %}
        <ul>
            {% for contact in client.contacts.all %}
                <li><strong>{{ contact.full_name }}</strong> ‚Äì {{ contact.position }} <br>
                    üìß {{ contact.email }} | üìû {{ contact.phone_number|default:"-" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ú–æ–¥—É–ª–∏</h3>
    {% if client.modules.all %}
        <ul>
            {% for module in client.modules.all %}
                <li>{{ module.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ú–æ–¥—É–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
    {% if client.integrations.all %}
        <ul>
            {% for integration in client.integrations.all %}
                <li>{{ integration.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–°–µ—Ä–≤–µ—Ä—ã</h3>
    {% if client.servers.all %}
        <ul>
            {% for server in client.servers.all %}
                <li><strong>{{ server.name }}</strong> ({{ server.ip_address }}) ‚Äì {{ server.operating_system }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –°–µ—Ä–≤–µ—Ä—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}

    <h3 class="mt-4">–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</h3>
    {% if client.server_version_history.all %}
        <ul>
            {% for history in client.server_version_history.all %}
                <li>{{ history.version }} ‚Äì {{ history.update_date|date:"d.m.Y" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>‚ùå –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
    {% endif %}

    <a href="{% url 'clients:client_list' %}" class="styled-btn mt-3">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É</a>
</div>

<script src="{% static 'clients/js/client_detail.js' %}"></script>

{% endblock %}
